{% extends "base.html" %}

{% block title %}Settings - Kapadokya NetBoot{% endblock %}

{% block page_title %}
    <i class="ti ti-settings me-2"></i>Settings
{% endblock %}

{% block content %}
<div class="row row-deck row-cards">
    <!-- Server Information -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-server me-2"></i>
                    Server Information
                </h3>
            </div>
            <div class="card-body">
                <div class="datagrid">
                    <div class="datagrid-item">
                        <div class="datagrid-title">Server Name</div>
                        <div class="datagrid-content">{{ settings.server.name }}</div>
                    </div>
                    <div class="datagrid-item">
                        <div class="datagrid-title">Server IP</div>
                        <div class="datagrid-content"><code>{{ settings.server.ip }}</code></div>
                    </div>
                    <div class="datagrid-item">
                        <div class="datagrid-title">Version</div>
                        <div class="datagrid-content">
                            <span class="badge bg-primary">v3.0 - Tabler Edition</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Time & Timezone Settings -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-clock me-2"></i>
                    Time & Timezone
                </h3>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('update_time_settings') }}">
                    <div class="mb-3">
                        <label class="form-label">Timezone</label>
                        <input type="text" class="form-control" name="timezone" value="{{ settings.server.timezone if settings.server.timezone else 'UTC' }}">
                        <small class="form-hint">e.g., Europe/Istanbul, America/New_York</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">NTP Server</label>
                        <input type="text" class="form-control" name="ntp_server" value="{{ settings.server.ntp_server if settings.server.ntp_server else '' }}" placeholder="time.cloudflare.com">
                        <small class="form-hint">Primary NTP server</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">NTP Fallback</label>
                        <input type="text" class="form-control" name="ntp_fallback" value="{{ settings.server.ntp_fallback if settings.server.ntp_fallback else '' }}" placeholder="time.google.com">
                        <small class="form-hint">Fallback NTP servers (comma-separated)</small>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="ti ti-device-floppy me-2"></i>
                        Save Time Settings
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- DNS Settings -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-world me-2"></i>
                    DNS Configuration
                </h3>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('update_dns_settings') }}">
                    <div class="mb-3">
                        <label class="form-label required">Primary DNS</label>
                        <input type="text" class="form-control" name="dns_primary" value="{{ settings.network.dns_primary if settings.network.dns_primary else '' }}" required pattern="(\d{1,3}\.){3}\d{1,3}" placeholder="192.168.122.1">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Secondary DNS</label>
                        <input type="text" class="form-control" name="dns_secondary" value="{{ settings.network.dns_secondary if settings.network.dns_secondary else '' }}" pattern="(\d{1,3}\.){3}\d{1,3}" placeholder="8.8.8.8">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Tertiary DNS</label>
                        <input type="text" class="form-control" name="dns_tertiary" value="" pattern="(\d{1,3}\.){3}\d{1,3}" placeholder="8.8.4.4">
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="ti ti-device-floppy me-2"></i>
                        Save DNS Settings
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Network Information -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-network me-2"></i>
                    Network Configuration
                </h3>
            </div>
            <div class="card-body">
                <div class="datagrid">
                    <div class="datagrid-item">
                        <div class="datagrid-title">Subnet</div>
                        <div class="datagrid-content"><code>{{ settings.network.subnet }}</code></div>
                    </div>
                    <div class="datagrid-item">
                        <div class="datagrid-title">Netmask</div>
                        <div class="datagrid-content"><code>{{ settings.network.netmask if settings.network.netmask else '255.255.255.0' }}</code></div>
                    </div>
                    <div class="datagrid-item">
                        <div class="datagrid-title">Gateway</div>
                        <div class="datagrid-content"><code>{{ settings.network.gateway }}</code></div>
                    </div>
                    <div class="datagrid-item">
                        <div class="datagrid-title">DHCP Range</div>
                        <div class="datagrid-content"><code>{{ settings.network.dhcp_start }} - {{ settings.network.dhcp_end }}</code></div>
                    </div>
                </div>
                <div class="mt-3">
                    <a href="{{ url_for('dhcp_config_page') }}" class="btn btn-outline-primary">
                        <i class="ti ti-settings me-2"></i>
                        Configure Network
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
